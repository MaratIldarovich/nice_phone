"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}();!function(){var e=/[^0-9]/g,t=["Delete","Backspace","ArrowLeft","ArrowRight","F5"],s="n",a=function(){function a(e){var n=this;_classCallCheck(this,a),this.element=e.element,this.emptyChar=e.emptyChar||"",this.pattern=e.pattern,this.lastKey=null,this.oldPos=0,this.specials=[];var i=this,r=this.element,l=this.pattern.split(s);this.numOfNumbers=l.length-1,l.filter(function(e,t,s){return e&&s.indexOf(e)===t}).forEach(function(e,t){n.specials=n.specials.concat(0===t?e:e.split(""))}),r.addEventListener("click",function(e){i._isCorrectPos()||i._setMinPos()}),r.addEventListener("keydown",function(e){var s=1*e.key>=0;if(!e.ctrlKey&&t.indexOf(e.key)===-1&&!s&&!e.metaKey)return i.lastKey=null,void e.preventDefault();switch(i.lastKey=e.key,i.oldPos=this.selectionStart,i.oldStr=this.value,e.key){case"ArrowLeft":case"ArrowRight":case"Backspace":i._isCorrectPos(e.key)||(e.preventDefault(),i._setMinPos())}}),r.addEventListener("paste",function(e){i.oldPos=this.selectionStart;var t=e.clipboardData,s=t.getData("text");s=i.filterStr(s),s.length>i.numOfNumbers&&(s=s.slice(-i.numOfNumbers)),e.preventDefault();var a=this.value.substr(0,i.oldPos)+s+this.value.substr(i.oldPos+s.length),n=i.passStr(a),r=i._getNewPos(n,null,s,i.oldPos);this.value=n,i._setPos(r,r)}),r.addEventListener("input",function(e){var t=i.passStr(this.value),s=i._getNewPos(t,i.lastKey,null,i.oldPos);this.value=t,i._setPos(s,s)}),this.updateFromRaw("")}return _createClass(a,[{key:"filterStr",value:function(t){return 0===t.lastIndexOf(this.specials[0])&&(t=t.slice(this.specials[0].length)),t=t.replace(e,"")}},{key:"passStr",value:function(e){for(var t=this.filterStr(e),a="",n=0,i=0;(n<t.length||this.emptyChar)&&i<this.pattern.length;n++,i++){for(var r=t[n]||this.emptyChar;this.pattern[i]!==s;)a+=this.pattern[i],i++;a+=r}return a}},{key:"updateFromRaw",value:function(e){e=e||"",this.element.value=this.passStr(e)}},{key:"_getNewPos",value:function(e,t,s,a){var n;switch(t){case"Backspace":n=a-1;break;case"Delete":n=a;break;default:n=a+(s&&s.length||1)}for(var i=0;i<this.specials.length;i++)for(var r=this.specials[i],l=a;l<n;l++){var o=e.substr(l,r.length)===r;o&&(n+=r.length)}return n}},{key:"_setPos",value:function(e){this.element.setSelectionRange(e,e)}},{key:"_isCorrectPos",value:function(e){var t=this.element.selectionStart,s=void 0;switch(e){case"ArrowRight":s=1;break;default:s=-1}t+=s;for(var a=this.element.value[t];this.specials.indexOf(a)!==-1;)t+=s,a=this.element.value[t];return a!==this.emptyChar&&this.element.selectionStart+s>=this.specials[0].length}},{key:"_setMinPos",value:function(){var e=this.element.value.indexOf(this.emptyChar);e=Math.max(e,this.specials[0].length),this._setPos(e)}},{key:"isValid",value:function(){return this.element.value.replace(this.emptyChar,"").length===this.pattern.length}}]),a}();window.NicePhone=a}();