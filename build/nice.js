"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();!function(){var e=/[^0-9]/g,t=["Delete","Backspace","ArrowLeft","ArrowRight","F5"],s="n",i=function(){function i(e){var a=this;_classCallCheck(this,i),this.element=e.element,this.emptyChar=e.emptyChar||"",this.pattern=e.pattern,this.lastKey=null,this.oldPos=0,this.specials=[];var n=this,r=this.element;this.pattern.split(s).filter(function(e,t,s){return e&&s.indexOf(e)===t}).forEach(function(e,t){a.specials=a.specials.concat(0===t?e:e.split(""))}),r.addEventListener("click",function(e){n._isCorrectPos()||n._setMinPos()}),r.addEventListener("keydown",function(e){var s=1*e.key>=0;if(!e.ctrlKey&&t.indexOf(e.key)===-1&&!s&&!e.metaKey)return n.lastKey=null,void e.preventDefault();switch(n.lastKey=e.key,n.oldPos=this.selectionStart,n.oldStr=this.value,e.key){case"ArrowLeft":case"Backspace":n._isCorrectPos()||(e.preventDefault(),n._setMinPos())}}),r.addEventListener("paste",function(e){this.oldPos=this.selectionStart;var t=e.clipboardData,s=t.getData("text");e.preventDefault();var i=this.value.substr(0,this.oldPos)+s+this.value.substr(this.oldPos+s.length),a=n.passStr(i),r=n._getNewPos(a,null,s);this.value=a,n._setPos(r,r)}),r.addEventListener("input",function(e){var t=n.passStr(this.value),s=n._getNewPos(t,n.lastKey);this.value=t,n._setPos(s,s)}),this.updateFromRaw(e.defaultRaw)}return _createClass(i,[{key:"filterStr",value:function(t){return 0===t.lastIndexOf(this.specials[0])&&(t=t.slice(this.specials[0].length)),t=t.replace(e,"")}},{key:"passStr",value:function(e){for(var t=this.filterStr(e),i="",a=0,n=0;(a<t.length||this.emptyChar)&&n<this.pattern.length;a++,n++){for(var r=t[a]||this.emptyChar;this.pattern[n]!==s;)i+=this.pattern[n],n++;i+=r}return i}},{key:"updateFromRaw",value:function(e){e=e||"",this.element.value=this.passStr(e)}},{key:"_getNewPos",value:function(e,t,s){var i=this.oldPos;switch(t){case"Backspace":i=this.oldPos-1;break;case"Delete":i=this.oldPos;break;default:i=this.oldPos+(s&&s.length||1)}for(var a=0;a<this.specials.length;a++)for(var n=this.specials[a],r=this.oldPos;r<i;r++){var l=e.substr(r,n.length)===n;l&&(i+=n.length)}return i}},{key:"_setPos",value:function(e){this.element.setSelectionRange(e,e)}},{key:"_isCorrectPos",value:function(){if(this.emptyChar){for(var e=this.element.selectionStart-1,t=this.element.value[e];this.specials.indexOf(t)!==-1;)e--,t=this.element.value[e];return t!==this.emptyChar}return this.element.selectionStart>this.specials[0].length}},{key:"_setMinPos",value:function(){this.emptyChar?this._setPos(this.element.value.indexOf(this.emptyChar)):this._setPos(this.specials[0].length)}},{key:"isValid",value:function(){return this.element.value.length===this.pattern.length}}]),i}();window.NicePhone=i}();